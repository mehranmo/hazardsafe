{
    "name": "HazardSAFE HITL Workflow (Corrected)",
    "description": "Human-in-the-loop workflow: scenario -> compliance -> human approval -> provenance -> VC issuance -> output (approval) or rejection output.",
    "data": {
        "nodes": [
            {
                "id": "node_1",
                "type": "ChatInput",
                "data": {
                    "label": "Scenario Input",
                    "description": "Paste the JSON scenario here",
                    "field_name": "scenario",
                    "value": "{\"id\": \"SCN-DEMO-001\", \"material_class\": \"Class 7\", \"package_type\": \"Type B(U)\", \"ambient_temperature_c\": 25.0, \"transport_index\": 0.5}"
                },
                "position": {
                    "x": 0,
                    "y": 0
                }
            },
            {
                "id": "node_2",
                "type": "ComplianceAgent",
                "data": {
                    "label": "Compliance Agent",
                    "description": "Runs the HazardComplianceAgent on the scenario"
                },
                "position": {
                    "x": 250,
                    "y": 0
                }
            },
            {
                "id": "node_3",
                "type": "ChatInput",
                "data": {
                    "label": "HITL Approval",
                    "description": "Human approves (yes/no) the compliance result",
                    "field_name": "approval",
                    "value": ""
                },
                "position": {
                    "x": 500,
                    "y": -100
                }
            },
            {
                "id": "node_4",
                "type": "Conditional",
                "data": {
                    "label": "Approval Check",
                    "condition": "{{approval}} == 'yes'",
                    "true_node": "node_5",
                    "false_node": "node_9"
                },
                "position": {
                    "x": 750,
                    "y": -50
                }
            },
            {
                "id": "node_5",
                "type": "ProvenanceAgent",
                "data": {
                    "label": "Provenance (Approved)",
                    "description": "Logs the approved decision"
                },
                "position": {
                    "x": 1000,
                    "y": -100
                }
            },
            {
                "id": "node_6",
                "type": "ReportAgent",
                "data": {
                    "label": "Report & VC Agent (Approved)",
                    "description": "Issues a Verifiable Credential for the approved scenario"
                },
                "position": {
                    "x": 1250,
                    "y": -100
                }
            },
            {
                "id": "node_8",
                "type": "ChatOutput",
                "data": {
                    "label": "Final Output",
                    "description": "Shows the VC or success message"
                },
                "position": {
                    "x": 1500,
                    "y": -100
                }
            },
            {
                "id": "node_9",
                "type": "ProvenanceAgent",
                "data": {
                    "label": "Provenance (Rejected)",
                    "description": "Logs the rejected decision"
                },
                "position": {
                    "x": 1000,
                    "y": 100
                }
            },
            {
                "id": "node_10",
                "type": "ReportAgent",
                "data": {
                    "label": "Report & VC Agent (Rejected)",
                    "description": "Issues a rejection report / VC for the denied scenario"
                },
                "position": {
                    "x": 1250,
                    "y": 100
                }
            },
            {
                "id": "node_7",
                "type": "ChatOutput",
                "data": {
                    "label": "Rejection Output",
                    "description": "Shows why the scenario was rejected"
                },
                "position": {
                    "x": 1500,
                    "y": 100
                }
            }
        ],
        "edges": [
            {
                "source": "node_1",
                "target": "node_2"
            },
            {
                "source": "node_2",
                "target": "node_3"
            },
            {
                "source": "node_3",
                "target": "node_4"
            },
            {
                "source": "node_4",
                "target": "node_5",
                "condition": "true"
            },
            {
                "source": "node_4",
                "target": "node_9",
                "condition": "false"
            },
            {
                "source": "node_5",
                "target": "node_6"
            },
            {
                "source": "node_6",
                "target": "node_8"
            },
            {
                "source": "node_9",
                "target": "node_10"
            },
            {
                "source": "node_10",
                "target": "node_7"
            }
        ]
    },
    "is_component": false
}